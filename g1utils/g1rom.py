# g1rom.py

import gbutils

def open_rom(path):
	with open(path, "rb") as f:
		return ROM(f)

class ROM(gbutils.ROM):
	"""
	A Gen 1 Pokemon ROM.
	"""
	
	def __init__(self, arg):
		super(ROM, self).__init__(arg)
		self.version    = _get_game_version(self)
		self._locations = _version_locations[self.version]

	def get_location(self, name):
		"""
		Returns a named location in this ROM.
		
		@param name: The name of the location.
		@raise KeyError: if the named location is not found.
		"""
		return self._locations[name]

	@property
	def lang(self):
		"""
		A letter denoting the language of this ROM.
		Possible languages are:
			J: Japanese
			E: English
			F: French
			I: Italian
			G: German
			S: Spanish
		"""
		return self.version[0]
	
	@property
	def is_yellow(self):
		"""True if this is a Pokemon Yellow ROM."""
		return self.version[1] == "Y"
	@property
	def is_rg(self):
		"""True if this is a Japanese Pokemon Red or Green ROM."""
		return self.version[:2] in ("JR","JG")

_locations_JRv0 = {
	"base_stats":       ( 0x0E, 0x4000 ),
	"base_stats_mew":   ( 0x01, 0x4200 ),
	"char00_script":            0x04D1,
	"char57_script":            0x0587,
	"cries":            ( 0x0E, 0x541E ),
	"dex_entries":      ( 0x10, 0x445E ),
	"dex_nums":         ( 0x10, 0x679A ),
	"dungeon_warp_ids": ( 0x01, 0x6351 ),
	"dungeon_warps":    ( 0x01, 0x636A ),
	"exp_formulas":     ( 0x16, 0x5068 ),
	"fly_warps":        ( 0x01, 0x63DA ),
	"font":             ( 0x04, 0x4B19 ),
	"font2":            ( 0x04, 0x52F1 ),
	"item_names":       ( 0x01, 0x433F ),
	"item_prices":      ( 0x01, 0x421C ),
	"key_items":        ( 0x03, 0x6AA4 ),
	"learnsets_evos":   ( 0x0E, 0x7427 ),
	"map_banks":        ( 0x03, 0x4883 ),
	"map_headers":      ( None, 0x1BCB ),
	"map_music":        ( 0x03, 0x4693 ),
	"map_spritesets":   ( 0x05, 0x7A49 ),
	"mon_names":        ( 0x0E, 0x5068 ),
	"mon_palettes":     ( 0x1C, 0x6A1E ),
	"move_names":       ( 0x04, 0x4000 ),
	"moves":            ( 0x0E, 0x5658 ),
	"party_sprites":    ( 0x1C, 0x5DD1 ),
	"sgb_palettes":     ( 0x1C, 0x6AB6 ),
	"split_spritesets": ( 0x05, 0x7A6E ),
	"sprites":          ( 0x05, 0x7B0C ),
	"spritesets":       ( 0x05, 0x7A9E ),
	"tilesets":         ( 0x03, 0x4DF7 ),
	"trainer_gfx_pay":  ( 0x0E, 0x5C31 ),
	"trainer_names":    ( 0x0E, 0x5D1C ),
	"trainer_teams":    ( 0x0E, 0x60AC ),
	"txtcmd_sounds":            0x0707,
	"type_names":       ( 0x09, 0x7E3A ),
	"unrefd_basecry":   { 0x02:0x7611, 0x08:0x761D, 0x1F:0x7619 },
	"unrefd_fanfare":   ( 0x08, 0x5015 ),
	"unrefd_song":      ( 0x02, 0x5810 )
}
_locations_JGv0 = {
	"base_stats":       ( 0x0E, 0x4000 ),
	"base_stats_mew":   ( 0x01, 0x4200 ),
	"char00_script":            0x04D1,
	"char57_script":            0x0587,
	"cries":            ( 0x0E, 0x541E ),
	"dex_entries":      ( 0x10, 0x445E ),
	"dex_nums":         ( 0x10, 0x679A ),
	"dungeon_warp_ids": ( 0x01, 0x6352 ),
	"dungeon_warps":    ( 0x01, 0x636B ),
	"exp_formulas":     ( 0x16, 0x5068 ),
	"fly_warps":        ( 0x01, 0x63DB ),
	"font":             ( 0x04, 0x4B19 ),
	"font2":            ( 0x04, 0x52F1 ),
	"item_names":       ( 0x01, 0x433F ),
	"item_prices":      ( 0x01, 0x421C ),
	"key_items":        ( 0x03, 0x6AA4 ),
	"learnsets_evos":   ( 0x0E, 0x7427 ),
	"map_banks":        ( 0x03, 0x4883 ),
	"map_headers":      ( None, 0x1BCB ),
	"map_music":        ( 0x03, 0x4693 ),
	"map_spritesets":   ( 0x05, 0x7A49 ),
	"mon_names":        ( 0x0E, 0x5068 ),
	"mon_palettes":     ( 0x1C, 0x6A1E ),
	"move_names":       ( 0x04, 0x4000 ),
	"moves":            ( 0x0E, 0x5658 ),
	"party_sprites":    ( 0x1C, 0x5DD1 ),
	"sgb_palettes":     ( 0x1C, 0x6AB6 ),
	"split_spritesets": ( 0x05, 0x7A6E ),
	"sprites":          ( 0x05, 0x7B0C ),
	"spritesets":       ( 0x05, 0x7A9E ),
	"tilesets":         ( 0x03, 0x4DF7 ),
	"trainer_gfx_pay":  ( 0x0E, 0x5C31 ),
	"trainer_names":    ( 0x0E, 0x5D1C ),
	"trainer_teams":    ( 0x0E, 0x60AC ),
	"txtcmd_sounds":            0x0707,
	"type_names":       ( 0x09, 0x7E3A ),
	"unrefd_basecry":   { 0x02:0x7601, 0x08:0x761D, 0x1F:0x7609 },
	"unrefd_fanfare":   ( 0x08, 0x5015 ),
	"unrefd_song":      ( 0x02, 0x5810 )
}
_locations_JRv1 = {
	"base_stats":       ( 0x0E, 0x4000 ),
	"base_stats_mew":   ( 0x01, 0x4200 ),
	"char00_script":            0x04D1,
	"char57_script":            0x0587,
	"cries":            ( 0x0E, 0x541E ),
	"dex_entries":      ( 0x10, 0x445E ),
	"dex_nums":         ( 0x10, 0x679A ),
	"dungeon_warp_ids": ( 0x01, 0x62F6 ),
	"dungeon_warps":    ( 0x01, 0x630F ),
	"exp_formulas":     ( 0x16, 0x5068 ),
	"fly_warps":        ( 0x01, 0x637F ),
	"font":             ( 0x04, 0x4B19 ),
	"font2":            ( 0x04, 0x52F1 ),
	"item_names":       ( 0x01, 0x433F ),
	"item_prices":      ( 0x01, 0x421C ),
	"key_items":        ( 0x03, 0x6AA4 ),
	"learnsets_evos":   ( 0x0E, 0x7427 ),
	"map_banks":        ( 0x03, 0x4883 ),
	"map_headers":      ( None, 0x1BB9 ),
	"map_music":        ( 0x03, 0x4693 ),
	"map_spritesets":   ( 0x05, 0x7A49 ),
	"mon_names":        ( 0x0E, 0x5068 ),
	"mon_palettes":     ( 0x1C, 0x6A1E ),
	"move_names":       ( 0x04, 0x4000 ),
	"moves":            ( 0x0E, 0x5658 ),
	"party_sprites":    ( 0x1C, 0x5DD1 ),
	"sgb_palettes":     ( 0x1C, 0x6AB6 ),
	"split_spritesets": ( 0x05, 0x7A6E ),
	"sprites":          ( 0x05, 0x7B0C ),
	"spritesets":       ( 0x05, 0x7A9E ),
	"tilesets":         ( 0x03, 0x4DF7 ),
	"trainer_gfx_pay":  ( 0x0E, 0x5C31 ),
	"trainer_names":    ( 0x0E, 0x5D1C ),
	"trainer_teams":    ( 0x0E, 0x60AC ),
	"txtcmd_sounds":            0x0707,
	"type_names":       ( 0x09, 0x7E14 ),
	"unrefd_basecry":   { 0x02:0x7611, 0x08:0x761D, 0x1F:0x7619 },
	"unrefd_fanfare":   ( 0x08, 0x5015 ),
	"unrefd_song":      ( 0x02, 0x5810 )
}
_locations_JGv1 = {
	"base_stats":       ( 0x0E, 0x4000 ),
	"base_stats_mew":   ( 0x01, 0x4200 ),
	"char00_script":            0x04D1,
	"char57_script":            0x0587,
	"cries":            ( 0x0E, 0x541E ),
	"dex_entries":      ( 0x10, 0x445E ),
	"dex_nums":         ( 0x10, 0x679A ),
	"dungeon_warp_ids": ( 0x01, 0x62F7 ),
	"dungeon_warps":    ( 0x01, 0x6310 ),
	"exp_formulas":     ( 0x16, 0x5068 ),
	"fly_warps":        ( 0x01, 0x6380 ),
	"font":             ( 0x04, 0x4B19 ),
	"font2":            ( 0x04, 0x52F1 ),
	"item_names":       ( 0x01, 0x433F ),
	"item_prices":      ( 0x01, 0x421C ),
	"key_items":        ( 0x03, 0x6AA4 ),
	"learnsets_evos":   ( 0x0E, 0x7427 ),
	"map_banks":        ( 0x03, 0x4883 ),
	"map_headers":      ( None, 0x1BB9 ),
	"map_music":        ( 0x03, 0x4693 ),
	"map_spritesets":   ( 0x05, 0x7A49 ),
	"mon_names":        ( 0x0E, 0x5068 ),
	"mon_palettes":     ( 0x1C, 0x6A1E ),
	"move_names":       ( 0x04, 0x4000 ),
	"moves":            ( 0x0E, 0x5658 ),
	"party_sprites":    ( 0x1C, 0x5DD1 ),
	"sgb_palettes":     ( 0x1C, 0x6AB6 ),
	"split_spritesets": ( 0x05, 0x7A6E ),
	"sprites":          ( 0x05, 0x7B0C ),
	"spritesets":       ( 0x05, 0x7A9E ),
	"tilesets":         ( 0x03, 0x4DF7 ),
	"trainer_gfx_pay":  ( 0x0E, 0x5C31 ),
	"trainer_names":    ( 0x0E, 0x5D1C ),
	"trainer_teams":    ( 0x0E, 0x60AC ),
	"txtcmd_sounds":            0x0707,
	"type_names":       ( 0x09, 0x7E14 ),
	"unrefd_basecry":   { 0x02:0x7601, 0x08:0x761D, 0x1F:0x7609 },
	"unrefd_fanfare":   ( 0x08, 0x5015 ),
	"unrefd_song":      ( 0x02, 0x5810 )
}
_locations_JB = {
	"base_stats":       ( 0x0E, 0x43DE ),
	"base_stats_mew":   ( 0x01, 0x425B ),
	"char00_script":            0x1A20,
	"char57_script":            0x1AE3,
	"cries":            ( 0x0E, 0x57FC ),
	"dex_entries":      ( 0x10, 0x445B ),
	"dex_nums":         ( 0x10, 0x6784 ),
	"dungeon_warp_ids": ( 0x01, 0x6464 ),
	"dungeon_warps":    ( 0x01, 0x647D ),
	"exp_formulas":     ( 0x16, 0x50B8 ),
	"fly_warps":        ( 0x01, 0x64ED ),
	"font":             ( 0x04, 0x5E99 ),
	"font2":            ( 0x04, 0x6681 ),
	"item_names":       ( 0x01, 0x4733 ),
	"item_prices":      ( 0x01, 0x4610 ),
	"key_items":        ( 0x03, 0x6AC9 ),
	"learnsets_evos":   ( 0x0E, 0x7427 ),
	"map_banks":        ( 0x03, 0x4275 ),
	"map_headers":      ( None, 0x0167 ),
	"map_music":        ( 0x03, 0x4085 ),
	"map_spritesets":   ( 0x05, 0x7A64 ),
	"mon_names":        ( 0x0E, 0x5446 ),
	"mon_palettes":     ( 0x1C, 0x6A0D ),
	"move_names":       ( 0x04, 0x4000 ),
	"moves":            ( 0x0E, 0x4000 ),
	"party_sprites":    ( 0x1C, 0x5DC1 ),
	"sgb_palettes":     ( 0x1C, 0x6AA5 ),
	"split_spritesets": ( 0x05, 0x7A89 ),
	"sprites":          ( 0x05, 0x7B27 ),
	"spritesets":       ( 0x05, 0x7AB9 ),
	"tilesets":         ( 0x03, 0x47E9 ),
	"trainer_gfx_pay":  ( 0x0E, 0x5CCA ),
	"trainer_names":    ( 0x0E, 0x5DB5 ),
	"trainer_teams":    ( 0x0E, 0x60AC ),
	"txtcmd_sounds":            0x1C68,
	"type_names":       ( 0x09, 0x7DB1 ),
	"unrefd_basecry":   { 0x02:0x46E3, 0x08:0x498B, 0x1F:0x4758 },
	"unrefd_fanfare":   ( 0x08, 0x63DD ),
	"unrefd_song":      ( 0x02, 0x6913 )
}
_locations_ERB = {
	"base_stats":       ( 0x0E, 0x43DE ),
	"base_stats_mew":   ( 0x01, 0x425B ),
	"char00_script":            0x19F4,
	"char57_script":            0x1AB3,
	"cries":            ( 0x0E, 0x5446 ),
	"dex_entries":      ( 0x10, 0x447E ),
	"dex_nums":         ( 0x10, 0x5024 ),
	"dungeon_warp_ids": ( 0x01, 0x63BF ),
	"dungeon_warps":    ( 0x01, 0x63D8 ),
	"exp_formulas":     ( 0x16, 0x501D ),
	"fly_warps":        ( 0x01, 0x6448 ),
	"font":             ( 0x04, 0x5A80 ),
	"font2":            ( 0x04, 0x6288 ),
	"item_names":       ( 0x01, 0x472B ),
	"item_prices":      ( 0x01, 0x4608 ),
	"key_items":        ( 0x03, 0x6799 ),
	"learnsets_evos":   ( 0x0E, 0x705C ),
	"map_banks":        ( 0x03, 0x423D ),
	"map_headers":      ( None, 0x01AE ),
	"map_music":        ( 0x03, 0x404D ),
	"map_spritesets":   ( 0x05, 0x7A64 ),
	"mon_names":        ( 0x07, 0x421E ),
	"mon_palettes":     ( 0x1C, 0x65C8 ),
	"move_names":       ( 0x2C, 0x4000 ),
	"moves":            ( 0x0E, 0x4000 ),
	"party_sprites":    ( 0x1C, 0x590D ),
	"sgb_palettes":     ( 0x1C, 0x6660 ),
	"split_spritesets": ( 0x05, 0x7A89 ),
	"sprites":          ( 0x05, 0x7B27 ),
	"spritesets":       ( 0x05, 0x7AB9 ),
	"tilesets":         ( 0x03, 0x47BE ),
	"trainer_gfx_pay":  ( 0x0E, 0x5914 ),
	"trainer_names":    ( 0x0E, 0x59FF ),
	"trainer_teams":    ( 0x0E, 0x5D3B ),
	"txtcmd_sounds":            0x1C64,
	"type_names":       ( 0x09, 0x7DAE ),
	"unrefd_basecry":   { 0x02:0x46E3, 0x08:0x498B, 0x1F:0x4758 },
	"unrefd_fanfare":   ( 0x08, 0x632F ),
	"unrefd_song":      ( 0x02, 0x6913 )
}
_locations_FRB = {
	"base_stats":       ( 0x0E, 0x43DE ),
	"base_stats_mew":   ( 0x01, 0x425B ),
	"char00_script":            0x19F1,
	"char57_script":            0x1AAF,
	"cries":            ( 0x0E, 0x5446 ),
	"dex_entries":      ( 0x10, 0x447C ),
	"dex_nums":         ( 0x10, 0x4FAA ),
	"dungeon_warp_ids": ( 0x01, 0x645A ),
	"dungeon_warps":    ( 0x01, 0x6473 ),
	"exp_formulas":     ( 0x16, 0x501D ),
	"fly_warps":        ( 0x01, 0x64E3 ),
	"font":             ( 0x04, 0x5A80 ),
	"font2":            ( 0x04, 0x6298 ),
	"item_names":       ( 0x01, 0x472D ),
	"item_prices":      ( 0x01, 0x460A ),
	"key_items":        ( 0x03, 0x6789 ),
	"learnsets_evos":   ( 0x0E, 0x705F ),
	"map_banks":        ( 0x03, 0x423D ),
	"map_headers":      ( None, 0x01AE ),
	"map_music":        ( 0x03, 0x404D ),
	"map_spritesets":   ( 0x05, 0x7A64 ),
	"mon_names":        ( 0x07, 0x421E ),
	"mon_palettes":     ( 0x1C, 0x6599 ),
	"move_names":       ( 0x2C, 0x4000 ),
	"moves":            ( 0x0E, 0x4000 ),
	"party_sprites":    ( 0x1C, 0x58DE ),
	"sgb_palettes":     ( 0x1C, 0x6631 ),
	"split_spritesets": ( 0x05, 0x7A89 ),
	"sprites":          ( 0x05, 0x7B27 ),
	"spritesets":       ( 0x05, 0x7AB9 ),
	"tilesets":         ( 0x03, 0x47BE ),
	"trainer_gfx_pay":  ( 0x0E, 0x5914 ),
	"trainer_names":    ( 0x0E, 0x59FF ),
	"trainer_teams":    ( 0x0E, 0x5D3E ),
	"txtcmd_sounds":            0x1C60,
	"type_names":       ( 0x09, 0x7DAE ),
	"unrefd_basecry":   { 0x02:0x46E3, 0x08:0x498B, 0x1F:0x4758 },
	"unrefd_fanfare":   ( 0x08, 0x6333 ),
	"unrefd_song":      ( 0x02, 0x6913 )
}
_locations_IR = {
	"base_stats":       ( 0x0E, 0x43DE ),
	"base_stats_mew":   ( 0x01, 0x425B ),
	"char00_script":            0x19F4,
	"char57_script":            0x1AB3,
	"cries":            ( 0x0E, 0x5446 ),
	"dex_entries":      ( 0x10, 0x4480 ),
	"dex_nums":         ( 0x10, 0x4FB6 ),
	"dungeon_warp_ids": ( 0x01, 0x641E ),
	"dungeon_warps":    ( 0x01, 0x6437 ),
	"exp_formulas":     ( 0x16, 0x501D ),
	"fly_warps":        ( 0x01, 0x64A7 ),
	"font":             ( 0x04, 0x5A80 ),
	"font2":            ( 0x04, 0x6298 ),
	"item_names":       ( 0x01, 0x472D ),
	"item_prices":      ( 0x01, 0x460A ),
	"key_items":        ( 0x03, 0x6793 ),
	"learnsets_evos":   ( 0x0E, 0x7096 ),
	"map_banks":        ( 0x03, 0x423D ),
	"map_headers":      ( None, 0x01AE ),
	"map_music":        ( 0x03, 0x404D ),
	"map_spritesets":   ( 0x05, 0x7A64 ),
	"mon_names":        ( 0x07, 0x421E ),
	"mon_palettes":     ( 0x1C, 0x6608 ),
	"move_names":       ( 0x2C, 0x4000 ),
	"moves":            ( 0x0E, 0x4000 ),
	"party_sprites":    ( 0x1C, 0x594D ),
	"sgb_palettes":     ( 0x1C, 0x66A0 ),
	"split_spritesets": ( 0x05, 0x7A89 ),
	"sprites":          ( 0x05, 0x7B27 ),
	"spritesets":       ( 0x05, 0x7AB9 ),
	"tilesets":         ( 0x03, 0x47BE ),
	"trainer_gfx_pay":  ( 0x0E, 0x5914 ),
	"trainer_names":    ( 0x0E, 0x59FF ),
	"trainer_teams":    ( 0x0E, 0x5D63 ),
	"txtcmd_sounds":            0x1C64,
	"type_names":       ( 0x09, 0x7DAE ),
	"unrefd_basecry":   { 0x02:0x46E3, 0x08:0x498B, 0x1F:0x4758 },
	"unrefd_fanfare":   ( 0x08, 0x632E ),
	"unrefd_song":      ( 0x02, 0x6913 )
}
_locations_IB = {
	"base_stats":       ( 0x0E, 0x43DE ),
	"base_stats_mew":   ( 0x01, 0x425B ),
	"char00_script":            0x19F4,
	"char57_script":            0x1AB3,
	"cries":            ( 0x0E, 0x5446 ),
	"dex_entries":      ( 0x10, 0x4480 ),
	"dex_nums":         ( 0x10, 0x4FB6 ),
	"dungeon_warp_ids": ( 0x01, 0x641D ),
	"dungeon_warps":    ( 0x01, 0x6436 ),
	"exp_formulas":     ( 0x16, 0x501D ),
	"fly_warps":        ( 0x01, 0x64A6 ),
	"font":             ( 0x04, 0x5A80 ),
	"font2":            ( 0x04, 0x6298 ),
	"item_names":       ( 0x01, 0x472C ),
	"item_prices":      ( 0x01, 0x4609 ),
	"key_items":        ( 0x03, 0x6793 ),
	"learnsets_evos":   ( 0x0E, 0x7096 ),
	"map_banks":        ( 0x03, 0x423D ),
	"map_headers":      ( None, 0x01AE ),
	"map_music":        ( 0x03, 0x404D ),
	"map_spritesets":   ( 0x05, 0x7A64 ),
	"mon_names":        ( 0x07, 0x421E ),
	"mon_palettes":     ( 0x1C, 0x6608 ),
	"move_names":       ( 0x2C, 0x4000 ),
	"moves":            ( 0x0E, 0x4000 ),
	"party_sprites":    ( 0x1C, 0x594D ),
	"sgb_palettes":     ( 0x1C, 0x66A0 ),
	"split_spritesets": ( 0x05, 0x7A89 ),
	"sprites":          ( 0x05, 0x7B27 ),
	"spritesets":       ( 0x05, 0x7AB9 ),
	"tilesets":         ( 0x03, 0x47BE ),
	"trainer_gfx_pay":  ( 0x0E, 0x5914 ),
	"trainer_names":    ( 0x0E, 0x59FF ),
	"trainer_teams":    ( 0x0E, 0x5D63 ),
	"txtcmd_sounds":            0x1C64,
	"type_names":       ( 0x09, 0x7DAE ),
	"unrefd_basecry":   { 0x02:0x46E3, 0x08:0x498B, 0x1F:0x4758 },
	"unrefd_fanfare":   ( 0x08, 0x632E ),
	"unrefd_song":      ( 0x02, 0x6913 )
}
_locations_GRB = {
	"base_stats":       ( 0x0E, 0x43DE ),
	"base_stats_mew":   ( 0x01, 0x425B ),
	"char00_script":            0x19F4,
	"char57_script":            0x1AB3,
	"cries":            ( 0x0E, 0x5446 ),
	"dex_entries":      ( 0x10, 0x447A ),
	"dex_nums":         ( 0x10, 0x4F96 ),
	"dungeon_warp_ids": ( 0x01, 0x63E6 ),
	"dungeon_warps":    ( 0x01, 0x63FF ),
	"exp_formulas":     ( 0x16, 0x501D ),
	"fly_warps":        ( 0x01, 0x646F ),
	"font":             ( 0x04, 0x5A80 ),
	"font2":            ( 0x04, 0x6298 ),
	"item_names":       ( 0x01, 0x472D ),
	"item_prices":      ( 0x01, 0x460A ),
	"key_items":        ( 0x03, 0x6792 ),
	"learnsets_evos":   ( 0x0E, 0x7064 ),
	"map_banks":        ( 0x03, 0x423D ),
	"map_headers":      ( None, 0x01AE ),
	"map_music":        ( 0x03, 0x404D ),
	"map_spritesets":   ( 0x05, 0x7A64 ),
	"mon_names":        ( 0x07, 0x421E ),
	"mon_palettes":     ( 0x1C, 0x65A2 ),
	"move_names":       ( 0x2C, 0x4000 ),
	"moves":            ( 0x0E, 0x4000 ),
	"party_sprites":    ( 0x1C, 0x58E7 ),
	"sgb_palettes":     ( 0x1C, 0x663A ),
	"split_spritesets": ( 0x05, 0x7A89 ),
	"sprites":          ( 0x05, 0x7B27 ),
	"spritesets":       ( 0x05, 0x7AB9 ),
	"tilesets":         ( 0x03, 0x47BE ),
	"trainer_gfx_pay":  ( 0x0E, 0x5914 ),
	"trainer_names":    ( 0x0E, 0x59FF ),
	"trainer_teams":    ( 0x0E, 0x5D43 ),
	"txtcmd_sounds":            0x1C64,
	"type_names":       ( 0x09, 0x7DAE ),
	"unrefd_basecry":   { 0x02:0x46E3, 0x08:0x498B, 0x1F:0x4758 },
	"unrefd_fanfare":   ( 0x08, 0x633A ),
	"unrefd_song":      ( 0x02, 0x6913 )
}
_locations_SRB = {
	"base_stats":       ( 0x0E, 0x43DE ),
	"base_stats_mew":   ( 0x01, 0x425B ),
	"char00_script":            0x19F4,
	"char57_script":            0x1AB2,
	"cries":            ( 0x0E, 0x5446 ),
	"dex_entries":      ( 0x10, 0x4480 ),
	"dex_nums":         ( 0x10, 0x4FB4 ),
	"dungeon_warp_ids": ( 0x01, 0x641E ),
	"dungeon_warps":    ( 0x01, 0x6437 ),
	"exp_formulas":     ( 0x16, 0x501D ),
	"fly_warps":        ( 0x01, 0x64A7 ),
	"font":             ( 0x04, 0x5A80 ),
	"font2":            ( 0x04, 0x6298 ),
	"item_names":       ( 0x01, 0x472B ),
	"item_prices":      ( 0x01, 0x4608 ),
	"key_items":        ( 0x03, 0x679B ),
	"learnsets_evos":   ( 0x0E, 0x7069 ),
	"map_banks":        ( 0x03, 0x423D ),
	"map_headers":      ( None, 0x01AE ),
	"map_music":        ( 0x03, 0x404D ),
	"map_spritesets":   ( 0x05, 0x7A64 ),
	"mon_names":        ( 0x07, 0x421E ),
	"mon_palettes":     ( 0x1C, 0x65B8 ),
	"move_names":       ( 0x2C, 0x4000 ),
	"moves":            ( 0x0E, 0x4000 ),
	"party_sprites":    ( 0x1C, 0x58FD ),
	"sgb_palettes":     ( 0x1C, 0x6650 ),
	"split_spritesets": ( 0x05, 0x7A89 ),
	"sprites":          ( 0x05, 0x7B27 ),
	"spritesets":       ( 0x05, 0x7AB9 ),
	"tilesets":         ( 0x03, 0x47BE ),
	"trainer_gfx_pay":  ( 0x0E, 0x5914 ),
	"trainer_names":    ( 0x0E, 0x59FF ),
	"trainer_teams":    ( 0x0E, 0x5D48 ),
	"txtcmd_sounds":            0x1C63,
	"type_names":       ( 0x09, 0x7DAE ),
	"unrefd_basecry":   { 0x02:0x46E3, 0x08:0x498B, 0x1F:0x4758 },
	"unrefd_fanfare":   ( 0x08, 0x6334 ),
	"unrefd_song":      ( 0x02, 0x6913 )
}
_locations_JYv0 = {
	"base_stats":       ( 0x0E, 0x43DE ),
	"char00_script":            0x1868,
	"char57_script":            0x192B,
	"cries":            ( 0x0E, 0x5818 ),
	"dex_entries":      ( 0x10, 0x449D ),
	"dex_nums":         ( 0x10, 0x682D ),
	"dungeon_warp_ids": ( 0x01, 0x61D7 ),
	"dungeon_warps":    ( 0x01, 0x61F0 ),
	"exp_formulas":     ( 0x16, 0x4E73 ),
	"fly_warps":        ( 0x01, 0x6260 ),
	"font":             ( 0x04, 0x4A19 ),
	"font2":            ( 0x04, 0x5221 ),
	"item_names":       ( 0x01, 0x45C4 ),
	"item_prices":      ( 0x01, 0x44A1 ),
	"key_items":        ( 0x03, 0x69C0 ),
	"learnsets_evos":   ( 0x0E, 0x759C ),
	"map_banks":        ( 0x3F, 0x43E4 ),
	"map_headers":      ( 0x3F, 0x41F2 ),
	"map_music":        ( 0x3F, 0x4000 ),
	"map_spritesets":   ( 0x05, 0x41E6 ),
	"mon_names":        ( 0x0E, 0x5462 ),
	"mon_palettes":     ( 0x1C, 0x664F ),
	"move_names":       ( 0x04, 0x4000 ),
	"moves":            ( 0x0E, 0x4000 ),
	"party_sprites":    ( 0x1C, 0x5911 ),
	"sgb_palettes":     ( 0x1C, 0x66E7 ),
	"split_spritesets": ( 0x05, 0x420B ),
	"sprites":          ( 0x05, 0x42A9 ),
	"spritesets":       ( 0x05, 0x423B ),
	"tilesets":         ( 0x03, 0x4554 ),
	"trainer_gfx_pay":  ( 0x0E, 0x5C49 ),
	"trainer_names":    ( 0x0E, 0x5D34 ),
	"trainer_teams":    ( 0x0E, 0x6142 ),
	"txtcmd_sounds":            0x1AB0,
	"type_names":       ( 0x09, 0x7D66 ),
	"unrefd_basecry":   { 0x02:0x4681, 0x08:0x493B, 0x1F:0x46F3, 0x28:0x4337 },
	"unrefd_fanfare":   ( 0x08, 0x5C5D ),
	"unrefd_song":      ( 0x02, 0x67E6 )
}
_locations_JYv123 = {
	"base_stats":       ( 0x0E, 0x43DE ),
	"char00_script":            0x186E,
	"char57_script":            0x1931,
	"cries":            ( 0x0E, 0x5818 ),
	"dex_entries":      ( 0x10, 0x449D ),
	"dex_nums":         ( 0x10, 0x682D ),
	"dungeon_warp_ids": ( 0x01, 0x61D7 ),
	"dungeon_warps":    ( 0x01, 0x61F0 ),
	"exp_formulas":     ( 0x16, 0x4E73 ),
	"fly_warps":        ( 0x01, 0x6260 ),
	"font":             ( 0x04, 0x4A19 ),
	"font2":            ( 0x04, 0x5221 ),
	"item_names":       ( 0x01, 0x45C4 ),
	"item_prices":      ( 0x01, 0x44A1 ),
	"key_items":        ( 0x03, 0x69B7 ),
	"learnsets_evos":   ( 0x0E, 0x759C ),
	"map_banks":        ( 0x3F, 0x43E4 ),
	"map_headers":      ( 0x3F, 0x41F2 ),
	"map_music":        ( 0x3F, 0x4000 ),
	"map_spritesets":   ( 0x05, 0x41E6 ),
	"mon_names":        ( 0x0E, 0x5462 ),
	"mon_palettes":     ( 0x1C, 0x665A ),
	"move_names":       ( 0x04, 0x4000 ),
	"moves":            ( 0x0E, 0x4000 ),
	"party_sprites":    ( 0x1C, 0x5911 ),
	"sgb_palettes":     ( 0x1C, 0x66F2 ),
	"split_spritesets": ( 0x05, 0x420B ),
	"sprites":          ( 0x05, 0x42A9 ),
	"spritesets":       ( 0x05, 0x423B ),
	"tilesets":         ( 0x03, 0x454B ),
	"trainer_gfx_pay":  ( 0x0E, 0x5C49 ),
	"trainer_names":    ( 0x0E, 0x5D34 ),
	"trainer_teams":    ( 0x0E, 0x6142 ),
	"txtcmd_sounds":            0x1AB6,
	"type_names":       ( 0x09, 0x7D66 ),
	"unrefd_basecry":   { 0x02:0x4681, 0x08:0x493B, 0x1F:0x46F3, 0x28:0x4337 },
	"unrefd_fanfare":   ( 0x08, 0x5C5D ),
	"unrefd_song":      ( 0x02, 0x67E6 )
}
_locations_EY = {
	"base_stats":       ( 0x0E, 0x43DE ),
	"char00_script":            0x17C2,
	"char57_script":            0x1881,
	"cries":            ( 0x0E, 0x5462 ),
	"dex_entries":      ( 0x10, 0x450B ),
	"dex_nums":         ( 0x10, 0x50B1 ),
	"dungeon_warp_ids": ( 0x01, 0x6133 ),
	"dungeon_warps":    ( 0x01, 0x614C ),
	"exp_formulas":     ( 0x16, 0x4E73 ),
	"fly_warps":        ( 0x01, 0x61BC ),
	"font":             ( 0x04, 0x4600 ),
	"font2":            ( 0x04, 0x4E18 ),
	"gbc_palettes":     ( 0x1C, 0x6AF9 ),
	"item_names":       ( 0x01, 0x45B7 ),
	"item_prices":      ( 0x01, 0x4494 ),
	"key_items":        ( 0x03, 0x66DD ),
	"learnsets_evos":   ( 0x0E, 0x71E5 ),
	"map_banks":        ( 0x3F, 0x43E4 ),
	"map_headers":      ( 0x3F, 0x41F2 ),
	"map_music":        ( 0x3F, 0x4000 ),
	"map_spritesets":   ( 0x05, 0x41E6 ),
	"mon_names":        ( 0x3A, 0x4000 ),
	"mon_palettes":     ( 0x1C, 0x6921 ),
	"move_names":       ( 0x2F, 0x4000 ),
	"moves":            ( 0x0E, 0x4000 ),
	"party_sprites":    ( 0x1C, 0x59BA ),
	"sgb_palettes":     ( 0x1C, 0x69B9 ),
	"split_spritesets": ( 0x05, 0x420B ),
	"sprites":          ( 0x05, 0x42A9 ),
	"spritesets":       ( 0x05, 0x423B ),
	"tilesets":         ( 0x03, 0x4558 ),
	"trainer_gfx_pay":  ( 0x0E, 0x5893 ),
	"trainer_names":    ( 0x0E, 0x597E ),
	"trainer_teams":    ( 0x0E, 0x5DD1 ),
	"txtcmd_sounds":            0x1A3D,
	"type_names":       ( 0x09, 0x7D63 ),
	"unrefd_basecry":   { 0x02:0x4681, 0x08:0x493B, 0x1F:0x46F3, 0x20:0x4337 },
	"unrefd_fanfare":   ( 0x08, 0x5B9A ),
	"unrefd_song":      ( 0x02, 0x67E6 )
}
_locations_FY = {
	"base_stats":       ( 0x0E, 0x43DE ),
	"char00_script":            0x17BF,
	"char57_script":            0x187D,
	"cries":            ( 0x0E, 0x5462 ),
	"dex_entries":      ( 0x10, 0x4508 ),
	"dex_nums":         ( 0x10, 0x5036 ),
	"dungeon_warp_ids": ( 0x01, 0x61BC ),
	"dungeon_warps":    ( 0x01, 0x61D5 ),
	"exp_formulas":     ( 0x16, 0x4E73 ),
	"fly_warps":        ( 0x01, 0x6245 ),
	"font":             ( 0x04, 0x4600 ),
	"font2":            ( 0x04, 0x4E28 ),
	"gbc_palettes":     ( 0x1C, 0x6ACA ),
	"item_names":       ( 0x01, 0x45B8 ),
	"item_prices":      ( 0x01, 0x4495 ),
	"key_items":        ( 0x03, 0x66CD ),
	"learnsets_evos":   ( 0x0E, 0x71E8 ),
	"map_banks":        ( 0x3F, 0x43E4 ),
	"map_headers":      ( 0x3F, 0x41F2 ),
	"map_music":        ( 0x3F, 0x4000 ),
	"map_spritesets":   ( 0x05, 0x41E6 ),
	"mon_names":        ( 0x3A, 0x4000 ),
	"mon_palettes":     ( 0x1C, 0x68F2 ),
	"move_names":       ( 0x2F, 0x4000 ),
	"moves":            ( 0x0E, 0x4000 ),
	"party_sprites":    ( 0x1C, 0x598B ),
	"sgb_palettes":     ( 0x1C, 0x698A ),
	"split_spritesets": ( 0x05, 0x420B ),
	"sprites":          ( 0x05, 0x42A9 ),
	"spritesets":       ( 0x05, 0x423B ),
	"tilesets":         ( 0x03, 0x4558 ),
	"trainer_gfx_pay":  ( 0x0E, 0x5893 ),
	"trainer_names":    ( 0x0E, 0x597E ),
	"trainer_teams":    ( 0x0E, 0x5DD4 ),
	"txtcmd_sounds":            0x1A39,
	"type_names":       ( 0x09, 0x7D63 ),
	"unrefd_basecry":   { 0x02:0x4681, 0x08:0x493B, 0x1F:0x46F3, 0x20:0x4337 },
	"unrefd_fanfare":   ( 0x08, 0x5B9B ),
	"unrefd_song":      ( 0x02, 0x67E6 )
}
_locations_IY = {
	"base_stats":       ( 0x0E, 0x43DE ),
	"char00_script":            0x17C2,
	"char57_script":            0x1881,
	"cries":            ( 0x0E, 0x5462 ),
	"dex_entries":      ( 0x10, 0x450D ),
	"dex_nums":         ( 0x10, 0x5043 ),
	"dungeon_warp_ids": ( 0x01, 0x6182 ),
	"dungeon_warps":    ( 0x01, 0x619B ),
	"exp_formulas":     ( 0x16, 0x4E73 ),
	"fly_warps":        ( 0x01, 0x620B ),
	"font":             ( 0x04, 0x4600 ),
	"font2":            ( 0x04, 0x4E28 ),
	"gbc_palettes":     ( 0x1C, 0x6B39 ),
	"item_names":       ( 0x01, 0x45B8 ),
	"item_prices":      ( 0x01, 0x4495 ),
	"key_items":        ( 0x03, 0x66E1 ),
	"learnsets_evos":   ( 0x0E, 0x720D ),
	"map_banks":        ( 0x3F, 0x43E4 ),
	"map_headers":      ( 0x3F, 0x41F2 ),
	"map_music":        ( 0x3F, 0x4000 ),
	"map_spritesets":   ( 0x05, 0x41E6 ),
	"mon_names":        ( 0x3A, 0x4000 ),
	"mon_palettes":     ( 0x1C, 0x6961 ),
	"move_names":       ( 0x2F, 0x4000 ),
	"moves":            ( 0x0E, 0x4000 ),
	"party_sprites":    ( 0x1C, 0x59FA ),
	"sgb_palettes":     ( 0x1C, 0x69F9 ),
	"split_spritesets": ( 0x05, 0x420B ),
	"sprites":          ( 0x05, 0x42A9 ),
	"spritesets":       ( 0x05, 0x423B ),
	"tilesets":         ( 0x03, 0x4558 ),
	"trainer_gfx_pay":  ( 0x0E, 0x5893 ),
	"trainer_names":    ( 0x0E, 0x597E ),
	"trainer_teams":    ( 0x0E, 0x5DF9 ),
	"txtcmd_sounds":            0x1A3D,
	"type_names":       ( 0x09, 0x7D63 ),
	"unrefd_basecry":   { 0x02:0x4681, 0x08:0x493B, 0x1F:0x46F3, 0x20:0x4337 },
	"unrefd_fanfare":   ( 0x08, 0x5B94 ),
	"unrefd_song":      ( 0x02, 0x67E6 )
}
_locations_GY = {
	"base_stats":       ( 0x0E, 0x43DE ),
	"char00_script":            0x17C2,
	"char57_script":            0x1886,
	"cries":            ( 0x0E, 0x5462 ),
	"dex_entries":      ( 0x10, 0x4507 ),
	"dex_nums":         ( 0x10, 0x5023 ),
	"dungeon_warp_ids": ( 0x01, 0x6148 ),
	"dungeon_warps":    ( 0x01, 0x6161 ),
	"exp_formulas":     ( 0x16, 0x4E73 ),
	"fly_warps":        ( 0x01, 0x61D1 ),
	"font":             ( 0x04, 0x4600 ),
	"font2":            ( 0x04, 0x4E28 ),
	"gbc_palettes":     ( 0x1C, 0x6AD8 ),
	"item_names":       ( 0x01, 0x45B8 ),
	"item_prices":      ( 0x01, 0x4495 ),
	"key_items":        ( 0x03, 0x66D2 ),
	"learnsets_evos":   ( 0x0E, 0x71F2 ),
	"map_banks":        ( 0x3F, 0x43E4 ),
	"map_headers":      ( 0x3F, 0x41F2 ),
	"map_music":        ( 0x3F, 0x4000 ),
	"map_spritesets":   ( 0x05, 0x41E6 ),
	"mon_names":        ( 0x3A, 0x4000 ),
	"mon_palettes":     ( 0x1C, 0x6900 ),
	"move_names":       ( 0x2F, 0x4000 ),
	"moves":            ( 0x0E, 0x4000 ),
	"party_sprites":    ( 0x1C, 0x5999 ),
	"sgb_palettes":     ( 0x1C, 0x6998 ),
	"split_spritesets": ( 0x05, 0x420B ),
	"sprites":          ( 0x05, 0x42A9 ),
	"spritesets":       ( 0x05, 0x423B ),
	"tilesets":         ( 0x03, 0x4558 ),
	"trainer_gfx_pay":  ( 0x0E, 0x5893 ),
	"trainer_names":    ( 0x0E, 0x597E ),
	"trainer_teams":    ( 0x0E, 0x5DDE ),
	"txtcmd_sounds":            0x1A42,
	"type_names":       ( 0x09, 0x7D63 ),
	"unrefd_basecry":   { 0x02:0x4681, 0x08:0x493B, 0x1F:0x46F3, 0x20:0x4337 },
	"unrefd_fanfare":   ( 0x08, 0x5BA1 ),
	"unrefd_song":      ( 0x02, 0x67E6 )
}
_locations_SY = {
	"base_stats":       ( 0x0E, 0x43DE ),
	"char00_script":            0x17C2,
	"char57_script":            0x1880,
	"cries":            ( 0x0E, 0x5462 ),
	"dex_entries":      ( 0x10, 0x450D ),
	"dex_nums":         ( 0x10, 0x5041 ),
	"dungeon_warp_ids": ( 0x01, 0x617A ),
	"dungeon_warps":    ( 0x01, 0x6193 ),
	"exp_formulas":     ( 0x16, 0x4E73 ),
	"fly_warps":        ( 0x01, 0x6203 ),
	"font":             ( 0x04, 0x4600 ),
	"font2":            ( 0x04, 0x4E28 ),
	"gbc_palettes":     ( 0x1C, 0x6AE9 ),
	"item_names":       ( 0x01, 0x45B8 ),
	"item_prices":      ( 0x01, 0x4495 ),
	"key_items":        ( 0x03, 0x66E0 ),
	"learnsets_evos":   ( 0x0E, 0x71F2 ),
	"map_banks":        ( 0x3F, 0x43E4 ),
	"map_headers":      ( 0x3F, 0x41F2 ),
	"map_music":        ( 0x3F, 0x4000 ),
	"map_spritesets":   ( 0x05, 0x41E6 ),
	"mon_names":        ( 0x3A, 0x4000 ),
	"mon_palettes":     ( 0x1C, 0x6911 ),
	"move_names":       ( 0x2F, 0x4000 ),
	"moves":            ( 0x0E, 0x4000 ),
	"party_sprites":    ( 0x1C, 0x59AA ),
	"sgb_palettes":     ( 0x1C, 0x69A9 ),
	"split_spritesets": ( 0x05, 0x420B ),
	"sprites":          ( 0x05, 0x42A9 ),
	"spritesets":       ( 0x05, 0x423B ),
	"tilesets":         ( 0x03, 0x4558 ),
	"trainer_gfx_pay":  ( 0x0E, 0x5893 ),
	"trainer_names":    ( 0x0E, 0x597E ),
	"trainer_teams":    ( 0x0E, 0x5DDE ),
	"txtcmd_sounds":            0x1A3C,
	"type_names":       ( 0x09, 0x7D63 ),
	"unrefd_basecry":   { 0x02:0x4681, 0x08:0x493B, 0x1F:0x46F3, 0x20:0x4337 },
	"unrefd_fanfare":   ( 0x08, 0x5B9C ),
	"unrefd_song":      ( 0x02, 0x67E6 )
}
_version_locations = {
	"JRv0": _locations_JRv0,
	"JGv0": _locations_JGv0,
	"JRv1": _locations_JRv1,
	"JGv1": _locations_JGv1,
	"JB":   _locations_JB,
	"ER":   _locations_ERB,
	"EB":   _locations_ERB,
	"FR":   _locations_FRB,
	"FB":   _locations_FRB,
	"IR":   _locations_IR,
	"IB":   _locations_IB,
	"GR":   _locations_GRB,
	"GB":   _locations_GRB,
	"SR":   _locations_SRB,
	"SB":   _locations_SRB,
	"JYv0": _locations_JYv0,
	"JYv1": _locations_JYv123,
	"JYv2": _locations_JYv123,
	"JYv3": _locations_JYv123,
	"EY":   _locations_EY,
	"FY":   _locations_FY,
	"IY":   _locations_IY,
	"GY":   _locations_GY,
	"SY":   _locations_SY
}

_version_checksums = {
	0xA2C1: "JRv0",
	0xDDD5: "JGv0",
	0xB866: "JRv1",
	0xF547: "JGv1",
	0xDC36: "JB",
	0x91E6: "ER",
	0x9D0A: "EB",
	0x7AFC: "FR",
	0x56A4: "FB",
	0x89D2: "IR",
	0x5E9C: "IB",
	0x5CDC: "GR",
	0x2EBC: "GB",
	0x384A: "SR",
	0x14D7: "SB",
	0x9C29: "JYv0",
	0x8858: "JYv1",
	0xEDD9: "JYv2",
	0xD984: "JYv3",
	0x047C: "EY",
	0xB7C1: "FY",
	0x4E8F: "IY",
	0x66FB: "GY",
	0x5637: "SY",
}
def _get_game_version(rom):
	version = _version_checksums.get(rom.global_checksum)
	if version is None:
		raise Exception("Unknown ROM (Cart ID: %s, global checksum: 0x%.2X)" % (rom.title, rom.global_checksum))
	return version
